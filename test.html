<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - CarbassDeportes</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Prueba de Diagnóstico - CarbassDeportes</h1>
    
    <div class="test">
        <h3>Test 1: CSS</h3>
        <p id="css-test">Verificando CSS...</p>
    </div>
    
    <div class="test">
        <h3>Test 2: Firebase</h3>
        <p id="firebase-test">Verificando Firebase...</p>
    </div>
    
    <div class="test">
        <h3>Test 3: Firestore</h3>
        <p id="firestore-test">Verificando Firestore...</p>
    </div>
    
    <div class="test">
        <h3>Test 4: Imágenes</h3>
        <p id="images-test">Verificando imágenes...</p>
        <img id="logo-test" src="sours/img/logos/logo_carbass.png" alt="Logo Test" style="max-width: 100px;">
    </div>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>
    
    <script>
        // Test 1: CSS
        const styles = getComputedStyle(document.body);
        document.getElementById('css-test').textContent = styles.fontFamily ? 'CSS OK ✅' : 'CSS Error ❌';
        document.getElementById('css-test').parentElement.className = 'test ' + (styles.fontFamily ? 'success' : 'error');
        
        // Test 2: Firebase
        setTimeout(() => {
            const firebaseOk = typeof firebase !== 'undefined';
            document.getElementById('firebase-test').textContent = firebaseOk ? 'Firebase OK ✅' : 'Firebase Error ❌';
            document.getElementById('firebase-test').parentElement.className = 'test ' + (firebaseOk ? 'success' : 'error');
            
            if (firebaseOk) {
                // Test 3: Firestore
                try {
                    const db = firebase.firestore();
                    db.collection('articulos').limit(1).get()
                        .then((snapshot) => {
                            const hasData = !snapshot.empty;
                            document.getElementById('firestore-test').textContent = hasData ? 
                                `Firestore OK - ${snapshot.size} productos ✅` : 'Firestore conectado pero sin productos ⚠️';
                            document.getElementById('firestore-test').parentElement.className = 'test ' + (hasData ? 'success' : 'error');
                        })
                        .catch((error) => {
                            document.getElementById('firestore-test').textContent = `Firestore Error: ${error.message} ❌`;
                            document.getElementById('firestore-test').parentElement.className = 'test error';
                        });
                } catch (error) {
                    document.getElementById('firestore-test').textContent = `Firestore Error: ${error.message} ❌`;
                    document.getElementById('firestore-test').parentElement.className = 'test error';
                }
            }
        }, 1000);
        
        // Test 4: Imágenes
        const logoImg = document.getElementById('logo-test');
        logoImg.onload = function() {
            document.getElementById('images-test').textContent = 'Imágenes OK ✅';
            document.getElementById('images-test').parentElement.className = 'test success';
        };
        logoImg.onerror = function() {
            document.getElementById('images-test').textContent = 'Imágenes Error ❌';
            document.getElementById('images-test').parentElement.className = 'test error';
        };
    </script>
</body>
</html>